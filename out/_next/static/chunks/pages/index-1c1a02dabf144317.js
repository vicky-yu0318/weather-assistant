(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(1242)}])},1242:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return tv}});var i=e(2729),r=e(5893),o=e(6486),a=e.n(o),l=e(7294),c=e(2220),s=e(2988),u=e(1683),d=e(9738),h=e(5675),m=e.n(h),g={src:"/_next/static/media/mostly-cloud.cd5d30d4.svg",height:64,width:64,blurWidth:0,blurHeight:0},x={src:"/_next/static/media/day-sunny-haze.68b9466a.svg",height:64,width:64,blurWidth:0,blurHeight:0},f={src:"/_next/static/media/day-cloudy-haze.abead073.svg",height:147,width:136,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/night-cloudy-haze.b36fe61b.svg",height:146,width:135,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/default-weather.cd97e74c.png",height:199,width:300,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAcUlEQVR42j2JyQqDQBBE+///x2yXZJIhyUSNOyp48CAIbrM4era8CM3rV1V04x7u8vyBJyac+/fMdieE68tlInQewk/Lumnf/wxO3E+4l2D4BJmerbGr1LMbF4TXjyrKq26QythRajQgTcrAjF1A+MENxL1mXFknxm0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:5};function b(){let t=(0,i._)(["\n  height: 110px;\n  img {\n    height: 100%;\n    width: auto;\n  }\n"]);return b=function(){return t},t}let C=c.Z.div(b()),N={day:{陰:{src:"/_next/static/media/day-cloudy.6969c1fe.svg",height:124,width:136,blurWidth:0,blurHeight:0},有霧:{src:"/_next/static/media/foggy.ce7a41b2.svg",height:64,width:64,blurWidth:0,blurHeight:0},陰有雨:{src:"/_next/static/media/day-cloudy-with-rain.c7b07f26.svg",height:154,width:136,blurWidth:0,blurHeight:0},多雲:g,晴有靄:x,晴有霾:x,陰有靄:f,陰有霾:f},night:{陰:{src:"/_next/static/media/night-cloudy.f53c6cef.svg",height:123,width:134,blurWidth:0,blurHeight:0},有霧:{src:"/_next/static/media/night-fog.00480769.svg",height:116,width:123,blurWidth:0,blurHeight:0},陰有雨:{src:"/_next/static/media/night-cloudy-with-rain.17b59ea7.svg",height:153,width:134,blurWidth:0,blurHeight:0},多雲:g,晴有靄:p,晴有霾:p,陰有靄:p,陰有霾:p}};var w=t=>{let{currentWeather:n,currentMoment:e}=t,i=(0,l.useMemo)(()=>_.get(N,"".concat(e,".").concat(n),y),[e,n]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(C,{children:(0,r.jsx)(m(),{src:i,alt:"",priority:!0,as:"image"})})})},v={src:"/_next/static/media/airFlow.4bd5447a.svg",height:92,width:120,blurWidth:0,blurHeight:0},j={src:"/_next/static/media/rain.2c8a7db0.svg",height:123,width:142,blurWidth:0,blurHeight:0},A={src:"/_next/static/media/refresh.6cc6f3c8.svg",height:92,width:104,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/loading.5633a75e.svg",height:91,width:97,blurWidth:0,blurHeight:0},W={src:"/_next/static/media/cog.098447ef.svg",height:121,width:116,blurWidth:0,blurHeight:0},S=e(3595),E=e(7451);function z(){let t=(0,i._)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  img {\n    animation: rotate ease-in infinite;\n    animation-duration: ",";\n  }\n  @keyframes rotate {\n    from {\n      transform: rotate(360deg);\n    }\n    to {\n      transform: rotate(0deg);\n    }\n  }\n"]);return z=function(){return t},t}function Z(){let t=(0,i._)(["\n  position: relative;\n  min-width: 360px;\n  height: 350px;\n  box-shadow: 0 1px 3px 0 #ccc;\n  background-color: ",";\n  box-sizing: content-box;\n  padding: 30px 15px;\n"]);return Z=function(){return t},t}function H(){let t=(0,i._)(["\n  font-size: 28px;\n  /* color: ","; */\n  color: ",";\n  margin-bottom: 20px;\n"]);return H=function(){return t},t}function B(){let t=(0,i._)(["\n  color: ",";\n  font-size: 16px;\n  color: #828282;\n"]);return B=function(){return t},t}function F(){let t=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  margin-top: 20px;\n"]);return F=function(){return t},t}function I(){let t=(0,i._)(["\n  color: ",";\n  font-size: 96px;\n  font-weight: 300;\n  display: flex;\n"]);return I=function(){return t},t}function M(){let t=(0,i._)(["\n  font-weight: normal;\n  font-size: 42px;\n"]);return M=function(){return t},t}function D(){let t=(0,i._)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  font-weight: 300;\n  margin-bottom: 10px;\n  img {\n    width: 25px;\n    height: auto;\n    margin-right: 30px;\n  }\n"]);return D=function(){return t},t}function P(){let t=(0,i._)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  font-weight: 300;\n  img {\n    width: 25px;\n    height: auto;\n    margin-right: 30px;\n  }\n"]);return P=function(){return t},t}function O(){let t=(0,i._)(["\n  display: flex;\n  gap: 5px;\n  justify-content: end;\n  align-items: center;\n  font-size: 12px;\n  color: ",";\n  margin-top: 20px;\n  img {\n    margin-left: 10px;\n    width: 15px;\n    height: 15px;\n    cursor: pointer;\n    animation: rotate ease-in infinite;\n    animation-duration: ",";\n  }\n  @keyframes rotate {\n    from {\n      transform: rotate(360deg);\n    }\n    to {\n      transform: rotate(0deg);\n    }\n  }\n"]);return O=function(){return t},t}function T(){let t=(0,i._)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  img {\n    width: 100%;\n    height: auto;\n  }\n"]);return T=function(){return t},t}let U=c.Z.div(z(),t=>{let{isLoading:n}=t;return n?"1.5s":"0s"}),L=c.Z.div(Z(),t=>{let{theme:n}=t;return n.foregroundColor}),R=c.Z.div(H(),t=>"dark"===t.theme?"#aaa":"#faa",t=>{let{theme:n}=t;return n.titleColor}),Q=c.Z.div(B(),t=>{let{theme:n}=t;return n.textColor}),X=c.Z.div(F()),V=c.Z.div(I(),t=>{let{theme:n}=t;return n.temperatureColor}),J=c.Z.div(M()),K=c.Z.div(D(),t=>{let{theme:n}=t;return n.textColor}),q=c.Z.div(P(),t=>{let{theme:n}=t;return n.textColor}),G=c.Z.div(O(),t=>{let{theme:n}=t;return n.textColor},t=>{let{isLoading:n}=t;return n?"1.5s":"0s"}),Y=c.Z.div(T());function $(t){let{currentMoment:n,setCurrentPage:e,weatherElement:i,fetchData:o,cityName:a}=t,{observationTime:l,description:c,temperature:s,windSpeed:d,humid:h,imageIcon:g,isLoading:x,rainPossibility:f,comfortability:p}=i;return x?(0,r.jsx)(L,{children:(0,r.jsx)(U,{children:(0,r.jsx)(m(),{src:k,alt:"",priority:!0})})}):(0,r.jsxs)(L,{children:[(0,r.jsx)(Y,{children:(0,r.jsx)(m(),{src:W,alt:"",onClick:()=>e("weatherSetting")})}),(0,r.jsx)(R,{children:a}),(0,r.jsx)(Q,{children:c}),(0,r.jsx)(Q,{style:{fontSize:12},children:p}),(0,r.jsxs)(X,{children:[(0,r.jsxs)(V,{children:[_.isNumber(s)?Math.round(s):"-",(0,r.jsx)(J,{children:"\xb0C"})]}),(0,r.jsx)(w,{currentWeather:g,currentMoment:n})]}),(0,r.jsxs)(K,{children:[(0,r.jsx)(m(),{src:v,alt:""}),(0,r.jsxs)("div",{children:[" ",d," m/h"]})]}),(0,r.jsxs)(q,{children:[(0,r.jsx)(m(),{src:j,alt:""}),(0,r.jsxs)("div",{children:[" ",f," %"]})]}),(0,r.jsxs)(G,{children:[(0,r.jsxs)("div",{children:["最後觀測時間：","-"!==l?(0,u.WU)((0,S.D)(l),"M/d a HH:mm",{locale:E.c}):"--"]}),(0,r.jsx)(m(),{src:x?k:A,alt:"",onClick:o})]})]})}let tt=[{cityName:"宜蘭縣",locationName:"宜蘭",sunriseCityName:"宜蘭"},{cityName:"嘉義市",locationName:"嘉義",sunriseCityName:"嘉義"},{cityName:"屏東縣",locationName:"恆春",sunriseCityName:"屏東"},{cityName:"雲林縣",locationName:"雲林臺大k",sunriseCityName:"屏東"},{cityName:"臺東縣",locationName:"臺東",sunriseCityName:"臺東"},{cityName:"臺北市",locationName:"臺北",sunriseCityName:"臺北"},{cityName:"金門縣",locationName:"金門",sunriseCityName:"金門"},{cityName:"桃園市",locationName:"桃園農改",sunriseCityName:"桃園"},{cityName:"彰化縣",locationName:"彰師大",sunriseCityName:"彰化"},{cityName:"高雄市",locationName:"高雄",sunriseCityName:"高雄"},{cityName:"基隆市",locationName:"基隆",sunriseCityName:"基隆"},{cityName:"臺南市",locationName:"南區中心",sunriseCityName:"臺南"},{cityName:"南投縣",locationName:"日月潭",sunriseCityName:"南投"},{cityName:"臺中市",locationName:"臺中",sunriseCityName:"臺中"},{cityName:"新竹縣",locationName:"新竹",sunriseCityName:"新竹"},{cityName:"花蓮縣",locationName:"花蓮",sunriseCityName:"花蓮"},{cityName:"連江縣",locationName:"馬祖",sunriseCityName:"馬祖"},{cityName:"澎湖縣",locationName:"澎湖",sunriseCityName:"澎湖"},{cityName:"新北市",locationName:"新北",sunriseCityName:"新北市"}],tn=t=>tt.find(n=>n.cityName===t);function te(){let t=(0,i._)(["\n  position: relative;\n  min-width: 360px;\n  box-shadow: ",";\n  background-color: ",";\n  box-sizing: border-box;\n  padding: 20px;\n"]);return te=function(){return t},t}function ti(){let t=(0,i._)(["\n  font-size: 28px;\n  color: ",";\n  margin-bottom: 30px;\n"]);return ti=function(){return t},t}function tr(){let t=(0,i._)(["\n  display: block;\n  font-size: 16px;\n  color: ",";\n  margin-bottom: 15px;\n"]);return tr=function(){return t},t}function to(){let t=(0,i._)(["\n  display: block;\n  box-sizing: border-box;\n  background: transparent;\n  border: 1px solid ",";\n  outline: none;\n  width: 100%;\n  max-width: 100%;\n  color: ",";\n  font-size: 16px;\n  padding: 7px 10px;\n  margin-bottom: 40px;\n\n  /* 修改 datalist 下拉箭頭樣式 */\n  &::-webkit-calendar-picker-indicator {\n    cursor: pointer;\n    /* display: none; 無效*/\n    opacity: ",";\n    display: none;\n  }\n"]);return to=function(){return t},t}function ta(){let t=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  > button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n    user-select: none;\n    margin: 0;\n    letter-spacing: 0.3px;\n    line-height: 1;\n    cursor: pointer;\n    overflow: visible;\n    text-transform: none;\n    border: 1px solid transparent;\n    background-color: transparent;\n    height: 35px;\n    width: 80px;\n    border-radius: 5px;\n\n    &:focus,\n    &.focus {\n      outline: 0;\n      box-shadow: none;\n    }\n\n    &::-moz-focus-inner {\n      padding: 0;\n      border-style: none;\n    }\n  }\n"]);return ta=function(){return t},t}function tl(){let t=(0,i._)(["\n  && {\n    color: ",";\n    border-color: ",";\n  }\n"]);return tl=function(){return t},t}function tc(){let t=(0,i._)(["\n  && {\n    color: white;\n    background-color: #40a9f3;\n  }\n"]);return tc=function(){return t},t}let ts=c.Z.div(te(),t=>{let{theme:n}=t;return n.boxShadow},t=>{let{theme:n}=t;return n.foregroundColor}),tu=c.Z.div(ti(),t=>{let{theme:n}=t;return n.titleColor}),td=c.Z.label(tr(),t=>{let{theme:n}=t;return n.textColor}),th=c.Z.input(to(),t=>{let{theme:n}=t;return n.textColor},t=>{let{theme:n}=t;return n.textColor},t=>{let{isOpacity:n}=t;return n?0:1}),tm=c.Z.div(ta()),tg=c.Z.button(tl(),t=>{let{theme:n}=t;return n.textColor},t=>{let{theme:n}=t;return n.textColor}),tx=c.Z.button(tc()),tf=tt.map(t=>t.cityName);var tp=t=>{let{setCurrentPage:n,setCurrentCity:e,cityName:i}=t,[o,a]=(0,l.useState)(i);return(0,l.useRef)(0),(0,r.jsxs)(ts,{children:[(0,r.jsx)(tu,{children:"設定"}),(0,r.jsx)(td,{htmlFor:"location",children:"地區"}),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(th,{isOpacity:o,list:"location-list",id:"location",name:"location",onChange:t=>{a(t.target.value)},value:o}),(0,r.jsx)("div",{onClick:()=>{a("")},style:{display:"flex",alignItems:"center",position:"absolute",right:15,bottom:0,top:0},children:o&&(0,r.jsx)("span",{style:{fontSize:"12px",cursor:"pointer"},children:"X"})})]}),(0,r.jsx)("datalist",{id:"location-list",children:tf.map(t=>(0,r.jsx)("option",{value:t},t))}),(0,r.jsxs)(tm,{children:[(0,r.jsx)(tg,{onClick:()=>n("weatherCard"),children:"返回"}),(0,r.jsx)(tx,{onClick:()=>{if(tf.includes(o))e(o),localStorage.setItem("cityName",o),n("weatherCard");else{alert("儲存失敗：您輸入的 ".concat(o," 並非有效的地區"));return}},children:"儲存"})]})]})};let ty=t=>fetch("https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=".concat("CWA-A2BB0B75-6139-4F2B-9DC0-770ECC8F9C46","&locationName=").concat(t)).then(t=>t.json()).then(t=>{let n=a().get(t,"records.location[0].weatherElement",[]).reduce((t,n)=>{if(["Wx","PoP","CI"].includes(n.elementName)){var e,i;t[n.elementName]=null==n?void 0:null===(i=n.time[0])||void 0===i?void 0:null===(e=i.parameter)||void 0===e?void 0:e.parameterName}return t},{});return{description:n.Wx||"-",rainPossibility:n.PoP||"-",comfortability:n.CI||"-"}}),tb=t=>fetch("https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=".concat("CWA-A2BB0B75-6139-4F2B-9DC0-770ECC8F9C46","&StationName=").concat(t)).then(t=>t.json()).then(t=>{var n,e,i,r,o;let l=a().get(t,"records.Station[0]",{});return{observationTime:(null===(n=l.ObsTime)||void 0===n?void 0:n.DateTime)||"-",locationName:l.StationName||"-",imageIcon:(null===(e=l.WeatherElement)||void 0===e?void 0:e.Weather)||"-",temperature:(null===(i=l.WeatherElement)||void 0===i?void 0:i.AirTemperature)||"-",windSpeed:(null===(r=l.WeatherElement)||void 0===r?void 0:r.WindSpeed)||"-",humid:(null===(o=l.WeatherElement)||void 0===o?void 0:o.RelativeHumidity)||"-"}});function tC(){let t=(0,i._)(["\n  background-color: ",";\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return tC=function(){return t},t}let tN={light:{backgroundColor:"#ededed",foregroundColor:"#f9f9f9",boxShadow:"0 1px 3px 0 #999999",titleColor:"#212121",temperatureColor:"#757575",textColor:"#828282"},dark:{backgroundColor:"#1F2022",foregroundColor:"#121416",boxShadow:"0 1px 4px 0 rgba(12, 12, 13, 0.2), 0 0 0 1px rgba(0, 0, 0, 0.15)",titleColor:"#f9f9fa",temperatureColor:"#dddddd",textColor:"#cccccc"}},tw=c.Z.div(tC(),t=>{let{theme:n}=t;return n.backgroundColor});function tv(){let[t,n]=(0,l.useState)("weatherCard"),[e]=function(t,n){let[e,i]=(0,l.useState)(()=>{{let e=localStorage.getItem(t);return null!==e?e:n}});return[e,n=>{i(n),localStorage.setItem(t,n)}]}("cityName","臺北市"),[i,o]=(0,l.useState)(),c=(0,l.useMemo)(()=>tn(i)||{},[i]);(0,l.useEffect)(()=>{o(localStorage.getItem("cityName")||"臺北市")},[i,e]);let[h,m]=function(t){let[n,e]=(0,l.useState)({observationTime:null,locationName:"",description:"",imageIcon:"",temperature:null,windSpeed:null,humid:null,isLoading:!0}),{locationName:i,cityName:r}=t,o=(0,l.useCallback)(async()=>{e(t=>({...t,isLoading:!0}));let[t,n]=await Promise.all([tb(i),ty(r)]);e({...t,...n,isLoading:!1})},[r,i]);return(0,l.useEffect)(()=>{a().isEmpty(t)||o()},[t,o]),[n,o]}(c),[g,x]=(0,l.useState)(),f=(0,l.useMemo)(()=>"night"===g?"dark":"light",[g]);return(0,l.useEffect)(()=>{(async function(){a().isEmpty(c)||x(await (t=>{let n=(0,u.WU)(new Date,"yyyy-MM-dd"),e=(0,d.h)(new Date);return fetch("https://opendata.cwa.gov.tw/api/v1/rest/datastore/A-B0062-001?Authorization=CWA-A2BB0B75-6139-4F2B-9DC0-770ECC8F9C46&CountyName=".concat(t,"&Date=").concat(n)).then(t=>t.json()).then(t=>{let{SunRiseTime:i,SunSetTime:r}=a().get(t,"records.locations.location[0].time[0]",{}),o=(0,d.h)("".concat(n," ").concat(i)),l=(0,d.h)("".concat(n," ").concat(r));return e>=o&&l>e?"day":"night"})})(c.cityName))})()},[c]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.a,{theme:tN[f],children:(0,r.jsxs)(tw,{children:["weatherCard"===t&&(0,r.jsx)($,{cityName:c.cityName,currentMoment:g,setCurrentPage:n,weatherElement:h,fetchData:m}),"weatherSetting"===t&&(0,r.jsx)(tp,{setCurrentPage:n,setCurrentCity:o,cityName:c.cityName})]})})})}}},function(t){t.O(0,[662,90,888,774,179],function(){return t(t.s=5728)}),_N_E=t.O()}]);